version: "3.9"
services:
  web:
    build: .
    container_name: dots-and-boxes
    ports:
      - "5173:5173"
    volumes:
      - .:/app
      - /app/node_modules
    tty: true
    stdin_open: true
    # 개발 중에는 컨테이너 시작 시마다 의존성을 설치하지 않도록 함
    # 처음 한 번은 호스트에서 `npm install`을 실행하세요. dev 서버는 Vite의 HMR로 파일 변경을 감지합니다.
    # For containerized development we install dependencies inside the container
    # (creates a container-local node_modules via the anonymous volume) and then start Vite.
    command: sh -c "npm install && npm run dev -- --host 0.0.0.0"
